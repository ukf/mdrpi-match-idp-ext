Shibboleth IdP MDRPI Filter Extension
=============================================

This plugin interprets metadata specified by the SAML V2.0 Metadata Extensions for
Registration and Publication Information Version 1.0 (MDRPI) extension specification.
It enables the identity provider to include a requesting entity's registrationAuthority
attribute in attribute release policies.

Requirements
=============================================

This plugin was developed for v2.4.x of the Shibboleth identity provider.
It may function on earlier releases in the v2.x series, but this is not supported.


Installation/Upgrade Instructions
=============================================

The following steps must be performed during the initial installation of this
plugin and at every IdP upgrade.

1. Shutdown the container running the IdP.

2. Place the mdrpi-ext JAR file, located in this bundle, in to the 
   IdP distribution's lib directory
   
3. Run the IdP's install script

4. Configure the plugin as described below.  This step is only performed
   during initial installation.

5. Restart the container running the IdP

Configuration Instructions
=============================================

** TODO **

The following changes to the IdP's attribute-resolver.xml configuration file 
only need to be performed the first time you install the plugin, after that they 
will carry over through upgrades.

1. Add the following namespace declaration to the root AttributeResolver element:
   xmlns:uadc="http://ukfederation.org.uk/schemas/uaattribute/resolver"
   
2. Add the following schema locations to the existing whitespace-separated list:
   http://ukfederation.org.uk/schemas/uaattribute/resolver classpath:/schema/ua-attribute-resolver.xsd
   
3. Define a new data connector as follows, filling in the UNIQUE_ID and Mapping
   elements (described in the following section):
   <resolver:DataConnector id="UNIQUE_ID" xsi:type="uadc:UserAgentMappedAttributes">
      <uadc:Mapping cidrBlock="...." attributeId="..." attributeValue="..." />
   </resolver:DataConnector>

4. Create one attribute definition per attribute generated by the data 
   connector.  Only attributes created by attribute definitions may be
   released to a service provider.
